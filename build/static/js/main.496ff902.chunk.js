(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(t,e,n){t.exports=n(43)},41:function(t,e,n){},43:function(t,e,n){"use strict";n.r(e);var a=n(0),c=n.n(a),r=n(15),s=n.n(r),u=n(2),o=n(3),i=n(5),l=n(4),m=n(6),d=n(16),h=n(7),p=n.n(h),f="/api/persons",b={getAll:function(){return p.a.get(f)},create:function(t){return p.a.post(f,t)},update:function(t,e){return p.a.put("".concat(f,"/").concat(t),e)},del:function(t){return p.a.delete("".concat(f,"/").concat(t))}},v=function(t){function e(t){var n;return Object(u.a)(this,e),(n=Object(i.a)(this,Object(l.a)(e).call(this,t))).createContact=function(t){return b.create(t).then(function(t){n.updateContacts(n.props.contacts.concat(t.data))})},n.handleAddPerson=function(t){t.preventDefault();var e={name:n.state.newName,number:n.state.newNumber},a=n.props.contacts.find(function(t){return t.name===e.name});if(a){if(window.confirm("".concat(e.name," on jo luettelossa, korvataanko numero uudella?"))){var c={name:e.name,number:e.number,id:a.id};b.update(a.id,c).then(function(t){var c=n.props.contacts.map(function(t){return t.id===a.id?Object(d.a)({},t,{number:e.number}):t});n.updateContacts(c),n.props.addSuccessAlert("muokattiin ".concat(e.name))}).catch(function(t){n.createContact(c)})}}else n.createContact(e).then(function(){n.props.addSuccessAlert("lis\xe4ttiin ".concat(e.name))});n.setState({newName:"",newNumber:""})},n.handleNameChange=function(t){n.setState({newName:t.target.value})},n.handleNumberChange=function(t){n.setState({newNumber:t.target.value})},n.state={newName:"",newNumber:""},n.updateContacts=n.props.updateContacts,n}return Object(m.a)(e,t),Object(o.a)(e,[{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement("h2",null,"Lis\xe4\xe4 uusi"),c.a.createElement("form",{onSubmit:this.handleAddPerson},c.a.createElement("div",null,"nimi:"," ",c.a.createElement("input",{value:this.state.newName,onChange:this.handleNameChange})),c.a.createElement("div",null,"numero:"," ",c.a.createElement("input",{value:this.state.newNumber,onChange:this.handleNumberChange})),c.a.createElement("div",null,c.a.createElement("button",{type:"submit"},"lis\xe4\xe4"))))}}]),e}(c.a.Component),C=function(t){var e=t.changeContactFilter;return c.a.createElement("div",null,"rajaa n\xe4ytett\xe4vi\xe4: ",c.a.createElement("input",{onChange:e}))},g=function(t){function e(){var t,n;Object(u.a)(this,e);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(n=Object(i.a)(this,(t=Object(l.a)(e)).call.apply(t,[this].concat(c)))).deleteContact=function(t){window.confirm("poisetaanko ".concat(t.name))&&b.del(t.id).then(function(){b.getAll().then(function(t){n.props.updateContacts(t.data)})})},n}return Object(m.a)(e,t),Object(o.a)(e,[{key:"render",value:function(){var t=this;if(0===this.props.contacts.length)return c.a.createElement("p",null,"Puhelinluettelo on tyhj\xe4.");var e=this.props.contacts.filter(function(e){return e.name.toUpperCase().includes(t.props.filter.toUpperCase())});return c.a.createElement("div",null,c.a.createElement("h2",null,"Numerot"),e.map(function(e){return c.a.createElement("div",{key:e.id},e.name," ",e.number,c.a.createElement("button",{onClick:function(){return t.deleteContact(e)}},"poista"))}))}}]),e}(c.a.Component),E=function(t){var e=t.message;return c.a.createElement("div",{className:"success-alert"},e)},w=function(t){function e(t){var n;return Object(u.a)(this,e),(n=Object(i.a)(this,Object(l.a)(e).call(this,t))).updateContacts=function(t){n.setState({contacts:t})},n.changeContactFilter=function(t){n.setState({contactFilter:t.target.value})},n.addSuccessAlert=function(t){n.setState({successAlertMessage:t}),setTimeout(function(){n.setState({successAlertMessage:null})},2e3)},n.state={contacts:[],contactFilter:"",successAlertMessage:null},n}return Object(m.a)(e,t),Object(o.a)(e,[{key:"componentDidMount",value:function(){var t=this;b.getAll().then(function(e){t.setState({contacts:e.data})})}},{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement("h2",null,"Puhelinluettelo"),this.state.successAlertMessage&&c.a.createElement(E,{message:this.state.successAlertMessage}),c.a.createElement(C,{changeContactFilter:this.changeContactFilter.bind(this)}),c.a.createElement(v,{contacts:this.state.contacts,updateContacts:this.updateContacts.bind(this),addSuccessAlert:this.addSuccessAlert.bind(this)}),c.a.createElement(g,{contacts:this.state.contacts,filter:this.state.contactFilter,updateContacts:this.updateContacts.bind(this)}))}}]),e}(c.a.Component);n(41);s.a.render(c.a.createElement(w,null),document.getElementById("root"))}},[[17,2,1]]]);
//# sourceMappingURL=main.496ff902.chunk.js.map